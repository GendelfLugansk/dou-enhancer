/*! UIkit 3.0.0-beta.37 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){if(!e.installed){var r=t.mixin,i=t.util,a=i.css,n=i.Dimensions,o=i.each,s=i.getImage,c=i.includes,u=i.isNumber,l=i.isUndefined,p=i.toFloat,d=i.win,f=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];r.parallax={props:f.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:f.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(e,t){var r=this;return f.reduce(function(i,n){if(l(e[n]))return i;var o,s,u,d=n.match(/color/i),f=d||"opacity"===n,h=e[n].slice(0);f&&a(t,n,""),h.length<2&&h.unshift(("scale"===n?1:f?a(t,n):0)||0);var g=c(h.join(""),"%")?"%":"px";if(d){var m=t.style.color;h=h.map(function(e){return a(a(t,"color",e),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return p(e)})}),t.style.color=m}else h=h.map(p);if(n.match(/^bg/))if(a(t,"background-position-"+n[2],""),s=a(t,"backgroundPosition").split(" ")["x"===n[2]?0:1],r.covers){var b=Math.min.apply(Math,h),v=Math.max.apply(Math,h),k=h.indexOf(b)<h.indexOf(v);u=v-b,h=h.map(function(e){return e-(k?b:v)}),o=(k?-u:0)+"px"}else o=s;return i[n]={steps:h,unit:g,pos:o,bgPos:s,diff:u},i},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return"cover"===a(""!==t.style.backgroundSize?a(t,"backgroundSize",""):t,"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(e){var t=this;if(this._resetComputeds(),e.active=!this.media||d.matchMedia(this.media).matches,e.image&&(e.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in e)&&this.covers&&this.bgProps.length){var r=a(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");r&&(e.image=!1,s(r).then(function(r){e.image={width:r.naturalWidth,height:r.naturalHeight},t.$emit()}))}},write:function(e){var t=this,r=e.image,i=e.active;if(r)if(i){var o=r.dimEl,s=n.cover(r,o);this.bgProps.forEach(function(e){var i=t.props[e],a=i.diff,c=i.bgPos,u=i.steps,l="bgy"===e?"height":"width",p=s[l]-o[l];c.match(/%$|0px/)&&(p<a?o[l]=s[l]+a-p:p>a&&(c=parseFloat(c))&&(t.props[e].steps=u.map(function(e){return e-(p-a)/(100/c)})),s=n.cover(r,o))}),a(this.$el,{backgroundSize:s.width+"px "+s.height+"px",backgroundRepeat:"no-repeat"})}else a(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;o(this.getCss(0),function(t,r){return a(e.$el,r,"")})},getCss:function(e){var t=!1,r=this.props;return Object.keys(r).reduce(function(i,a){var n=r[a],o=n.steps,s=n.unit,c=n.pos,u=g(o,e);switch(a){case"x":case"y":if(t)break;var l=["x","y"].map(function(t){return a===t?u+s:r[t]?g(r[t].steps,e)+r[t].unit:0}),d=l[0],f=l[1];t=i.transform+=" translate3d("+d+", "+f+", 0)";break;case"rotate":i.transform+=" rotate("+u+"deg)";break;case"scale":i.transform+=" scale("+u+")";break;case"bgy":case"bgx":i["background-position-"+a[2]]="calc("+c+" + "+(u+s)+")";break;case"color":case"backgroundColor":case"borderColor":var m=h(o,e),b=m[0],v=m[1],k=m[2];i[a]="rgba("+b.map(function(e,t){return e+=k*(v[t]-e),3===t?p(e):parseInt(e,10)}).join(",")+")";break;case"blur":i.filter+=" blur("+u+"px)";break;case"hue":i.filter+=" hue-rotate("+u+"deg)";break;case"fopacity":i.filter+=" opacity("+u+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":i.filter+=" "+a+"("+u+"%)";break;default:i[a]=u}return i},{transform:"",filter:""})}}}}function h(e,t){var r=e.length-1,i=Math.min(Math.floor(r*t),r-1),a=e.slice(i,i+2);return a.push(1===t?1:t%(1/r)*r),a}function g(e,t){var r=h(e,t),i=r[0],a=r[1],n=r[2];return(u(i)?i+Math.abs(i-a)*n*(i<a?1:-1):+a).toFixed(2)}}"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e);function t(r){if(!t.installed){r.use(e);var i=r.mixin,a=r.util,n=a.clamp,o=a.css,s=a.scrolledOver,c=a.query;r.component("parallax",{mixins:[i.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var r=e.target;return r&&c(r,t)||t}},update:[{read:function(e){return{prev:e.percent,percent:(t=s(this.target)/(this.viewport||1),r=this.easing,n(t*(1-(r-r*t))))};var t,r},write:function(e,t){var r=e.prev,i=e.percent,a=e.active;"scroll"!==t.type&&(r=!1),a?r!==i&&o(this.$el,this.getCss(i)):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});