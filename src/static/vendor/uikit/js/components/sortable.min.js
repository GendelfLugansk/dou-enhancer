/*! UIkit 3.0.0-beta.37 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitsortable",i):t.UIkitSortable=i()}(this,function(){"use strict";function t(i){var e;if(!t.installed){var s=i.mixin,o=i.util,r=o.addClass,h=o.after,l=o.assign,n=o.append,a=o.attr,c=o.before,d=o.closest,p=o.css,u=o.doc,f=o.docEl,g=o.height,m=o.fastdom,v=o.getPos,$=o.includes,b=o.index,y=o.isInput,x=o.noop,S=o.offset,k=o.off,w=o.on,E=o.pointerDown,D=o.pointerMove,C=o.pointerUp,N=o.position,Y=o.preventClick,I=o.Promise,P=o.remove,H=o.removeClass,T=o.toggleClass,M=o.toNodes,U=o.Transition,B=o.trigger,L=o.win,j=o.within;i.component("sortable",{mixins:[s.class],props:{group:String,animation:Number,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},defaults:{group:!1,animation:150,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1},init:function(){var t=this;["init","start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){t.scrollY=L.scrollY;var s=v(i),o=s.x,r=s.y;t.pos={x:o,y:r},e(i)}})},events:(e={},e[E]="init",e),update:{write:function(){if(this.clsEmpty&&T(this.$el,this.clsEmpty,!this.$el.children.length),this.drag){S(this.drag,{top:this.pos.y+this.origin.top,left:this.pos.x+this.origin.left});var t,i=S(this.drag).top,e=i+this.drag.offsetHeight;i>0&&i<this.scrollY?t=this.scrollY-5:e<g(u)&&e>g(L)+this.scrollY&&(t=this.scrollY+5),t&&setTimeout(function(){return L.scrollTo(L.scrollX,t)},5)}}},methods:{init:function(t){var i=t.target,e=t.button,s=t.defaultPrevented,o=M(this.$el.children).filter(function(t){return j(i,t)})[0];!o||y(t.target)||this.handle&&!j(i,this.handle)||e>0||j(i,"."+this.clsNoDrag)||s||(t.preventDefault(),this.touched=[this],this.placeholder=o,this.origin=l({target:i,index:b(o)},this.pos),w(f,D,this.move),w(f,C,this.end),w(L,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){this.drag=n(i.container,this.placeholder.outerHTML.replace(/^<li/i,"<div").replace(/li>$/i,"div>")),p(this.drag,l({boxSizing:"border-box",width:this.placeholder.offsetWidth,height:this.placeholder.offsetHeight},p(this.placeholder,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),a(this.drag,"uk-no-boot",""),r(this.drag,this.clsDrag,this.clsCustom),g(this.drag.firstElementChild,g(this.placeholder.firstElementChild));var e=S(this.placeholder),s=e.left,o=e.top;l(this.origin,{left:s-this.pos.x,top:o-this.pos.y}),r(this.placeholder,this.clsPlaceholder),r(this.$el.children,this.clsItem),r(f,this.clsDragState),B(this.$el,"start",[this,this.placeholder,this.drag]),this.move(t)},move:function(t){if(this.drag){this.$emit();var i="mousemove"===t.type?t.target:u.elementFromPoint(this.pos.x-u.body.scrollLeft,this.pos.y-u.body.scrollTop),e=W(i),s=W(this.placeholder),o=e!==s;if(e&&!j(i,this.placeholder)&&(!o||e.group&&e.group===s.group)){if(i=e.$el===i.parentNode&&i||M(e.$el.children).filter(function(t){return j(i,t)})[0],o)s.remove(this.placeholder);else if(!i)return;e.insert(this.placeholder,i),$(this.touched,e)||this.touched.push(e)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},scroll:function(){var t=L.scrollY;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$emit())},end:function(t){if(k(f,D,this.move),k(f,C,this.end),k(L,"scroll",this.scroll),this.drag){Y();var i=W(this.placeholder);this===i?this.origin.index!==b(this.placeholder)&&B(this.$el,"moved",[this,this.placeholder]):(B(i.$el,"added",[i,this.placeholder]),B(this.$el,"removed",[this,this.placeholder])),B(this.$el,"stop",[this]),P(this.drag),this.drag=null;var e=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return H(t.$el.children,e)}),H(f,this.clsDragState)}else"mouseup"!==t.type&&j(t.target,"a[href]")&&(location.href=d(t.target,"a[href]").href)},insert:function(t,i){var e=this;r(this.$el.children,this.clsItem);var s=function(){i?!j(t,e.$el)||(s=t,o=i,s.parentNode===o.parentNode&&b(s)>b(o))?c(i,t):h(i,t):n(e.$el,t);var s,o};this.animation?this.animate(s):s()},remove:function(t){j(t,this.$el)&&(this.animation?this.animate(function(){return P(t)}):P(t))},animate:function(t){var i=this,e=[],s=M(this.$el.children),o={position:"",width:"",height:"",pointerEvents:"",top:"",left:"",bottom:"",right:""};s.forEach(function(t){e.push(l({position:"absolute",pointerEvents:"none",width:t.offsetWidth,height:t.offsetHeight},N(t)))}),t(),s.forEach(U.cancel),p(this.$el.children,o),this.$update("update",!0),m.flush(),p(this.$el,"minHeight",g(this.$el));var r=s.map(function(t){return N(t)});I.all(s.map(function(t,s){return U.start(p(t,e[s]),r[s],i.animation)})).then(function(){p(i.$el,"minHeight",""),p(s,o),i.$update("update",!0),m.flush()},x)}}})}function W(t){return t&&(i.getComponent(t,"sortable")||W(t.parentNode))}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});